extends ../components/base.pug

mixin adminButtons
  div.columns
    div.column
      div.field.is-grouped
        if user && user.isAdmin
          div.control
            a.button.is-link(href='/seasons/' + season.id + '/divisions/' + division.id + '/playoff-series/create') Add Playoff Series

mixin navigationButtons
  div.field.is-grouped
    div.control
      a(href='/seasons/' + season.id + '/divisions/' + division.id + '/players')
        button.button.is-primary Players
    div.control
      a(href='/seasons/' + season.id + '/divisions/' + division.id + '/captains')
        button.button.is-success Captains
    div.control
      a(href='/seasons/' + season.id + '/divisions/' + division.id + '/stand-ins')
        button.button.is-info Stand-ins
    div.control
      a(href='/seasons/' + season.id + '/divisions/' + division.id + '/teams')
        button.button.is-warning Teams
    div.control
      a(href='/seasons/' + season.id + '/divisions/' + division.id + '/series')
        button.button.is-info Series
    div.control
      a(href='/seasons/' + season.id + '/divisions/' + division.id + '/standings')
        button.button.is-success Standings
    div.control
      a(href='/seasons/' + season.id + '/divisions/' + division.id + '/matchups')
        button.button.is-primary Matchups
    div.control
      a.button(disabled) Playoffs
    div.control
      a(href='/seasons/' + season.id + '/divisions/' + division.id + '/bracket')
        button.button.is-success Bracket

block title
  title #{title} : #{season.name} Series List

block content
  div.columns
    div.column
      h3.title.is-3.has-icon
        span.icon.is-medium
          i.fa.fa-list
        span #{division.name} #{season.name} Playoff Series
  +navigationButtons
  +adminButtons
  div.columns
    table.table.is-striped.is-middle-aligned.is-fullwidth
      thead
        tr
          th Round
          th Home Team Name
          th Home Team Logo
          th Home Team Points
          th Away Team Points
          th Away Team Logo
          th Away Team Name
          th Match Url
          if user && user.isAdmin
            th Edit
      tbody
        each _series in series
          tr
            td= _series.round
            td
              a(href='/seasons/' + season.id + '/divisions/' + division.id + '/teams/' + _series.home.id)= _series.home.name
            td
              figure.image.is-team-logo.hide-overflow
                img(src=_series.home.logo)
            td= _series.home.points
            if _series.away
              td= _series.away.points
              td
                figure.image.is-team-logo.hide-overflow
                  img(src=_series.away.logo)
              td
                a(href='/seasons/' + season.id + '/divisions/' + division.id + '/teams/' + _series.away.id)= _series.away.name
            else
              td 0
              td
              td
            if _series.match_url
              td
                a(href=_series.match_url) Link
            else
              td
            if user && user.isAdmin
              td
                a(href='/seasons/' + season.id + '/divisions/' + division.id + '/playoff-series/' + _series.id + '/edit') edit
  +adminButtons
